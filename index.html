<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Timecard</title>
<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  padding: 15px;
}

table {
  width: 100%;
  border-collapse: collapse;
}

th, td {
  padding: 8px;
  text-align: center;
  border: 1px solid #ccc;
}

input {
  width: 100%;
  padding: 6px;
  font-size: 16px;
  border: 1px solid #ccc;
  border-radius: 6px;
  background: #fff;
  box-sizing: border-box;
}

input[type="date"],
input[type="time"] {
  -webkit-appearance: none;
  appearance: none;
}

button {
  margin-top: 12px;
  padding: 10px;
  width: 100%;
  font-size: 16px;
  border-radius: 8px;
  border: none;
  background: #007aff;
  color: white;
}

.total {
  font-weight: bold;
}

h2 {
  margin-bottom: 15px;
}
</style>

</head>
<body>

<h2>Timecard</h2>

  <label for="payRate"><strong>Pay Rate:</strong></label>
<select id="payRate" onchange="calculate()" style="margin-bottom:15px; padding:6px; font-size:16px;">
  <option value="7.60">£7.60</option>
  <option value="10.05">£10.05</option>
  <option value="12.25" selected>£12.25</option>
  <option value="12.82">£12.82</option>
</select>


<table border="1">
<thead>
<tr>
<th>Date</th>
<th>Clock In</th>
<th>Clock Out</th>
<th>Break (hrs)</th>
<th>Total Hours</th>
</tr>
</thead>
<tbody id="rows">
</tbody>
</table>

<h3>Total Week Hours: <span id="weekTotal">0.00</span></h3>
<h3>Total Money: £<span id="totalMoney">0.00</span></h3>

<script>
function getWeekDates() {
  const today = new Date();
  const day = today.getDay(); // 0=Sun, 1=Mon

  const mondayOffset = (day === 0 ? -6 : 1 - day);
  const monday = new Date(today);
  monday.setDate(today.getDate() + mondayOffset);

  const dates = [];
  for (let i = 0; i < 7; i++) {
    const d = new Date(monday);
    d.setDate(monday.getDate() + i);
    dates.push(d);
  }
  return dates;
}

function formatDate(date) {
  return date.toLocaleDateString("en-GB", {
    day: "2-digit",
    month: "2-digit",
    year: "numeric"
  });
}

function addRow(dateObj) {
  const tbody = document.getElementById("rows");
  const row = document.createElement("tr");

  row.innerHTML = `
    <td>${formatDate(dateObj)}</td>
    <td><input type="time" class="in"></td>
    <td><input type="time" class="out"></td>
    <td><input type="number" step="0.01" class="break" value="0"></td>
    <td class="total">0.00</td>
  `;

  tbody.appendChild(row);

  row.querySelectorAll("input").forEach(input => {
    input.addEventListener("input", calculate);
  });
}

function calculate() {
  let weekTotal = 0;

  document.querySelectorAll("#rows tr").forEach(row => {
    const timeIn = row.querySelector(".in").value;
    const timeOut = row.querySelector(".out").value;
    const breakHours = parseFloat(row.querySelector(".break").value) || 0;

    if (timeIn && timeOut) {
      const inDate = new Date(`1970-01-01T${timeIn}:00`);
      const outDate = new Date(`1970-01-01T${timeOut}:00`);

      let diff = (outDate - inDate) / 1000 / 60 / 60;
      if (diff < 0) diff += 24;

      diff -= breakHours;
      if (diff < 0) diff = 0;

      row.querySelector(".total").innerText = diff.toFixed(2);
      weekTotal += diff;
    } else {
      row.querySelector(".total").innerText = "0.00";
    }
  });

document.getElementById("weekTotal").innerText = weekTotal.toFixed(2);

const selectedRate = parseFloat(document.getElementById("payRate").value);
const totalMoney = weekTotal * selectedRate;
document.getElementById("totalMoney").innerText = totalMoney.toFixed(2);
}

// Initialize Monday–Sunday automatically
const weekDates = getWeekDates();
weekDates.forEach(date => addRow(date));
</script>

</body>
</html>
